#!/bin/bash

# DOWNLOAD THE CURRENT WEEK CALENDAR
# ICT FOR INTERNET AND MULTIMEDIA 
# select true for the course you follow

today=`date +'%d-%m-%Y'`

ANTENNAS=false
BIG_DATA_COMPUTING_ch_1=false
BIG_DATA_COMPUTING_ch_2=false
BIOMETRICS=false
BIOPHOTONICS=false
CLINICAL_ENGINEERING_AND_HEALTH_TECHNOLOGY_ASSESSMENT=false
CLINICAL_NEUROPSYCHOLOGY=false
COMMUNICATION_NETWORK_DESIGN=false
COMPUTER_VISION=false
DIGITAL_COMMUNICATIONS=false
DIGITAL_FORENSICS=false
DIGITAL_INNOVATION_AND_SOCIETY=false
E_HEALTH=false
ECONOMIC_POLICY_AND_LOCAL_DEVELOPMENT=false
HUMAN_ELECTROPHYSIOLOGY=false
INFORMATION_THEORY=true
INTERNET_OF_THINGS_AND_SMART_CITIES=false
LABORATORY_OF_BIG_DATA_ANALYTICS=false
NETWORK_ANALYSIS_AND_SIMULATION=false
NETWORK_CODING=false
NETWORK_SYSTEMS_AND_DYNAMICS=false
OPTICAL_NETWORKS=false
OPTOELECTRONICS_FOR_GREEN_TECHNOLOGIES=false
PHOTOVOLTAIC_SCIENCE_AND_TECHNOLOGY=false
PHYSICS_DATA_ANALYSIS=false
PUBLIC_VALUES_IN_MEDIA_AND_ICT=false
QUANTUM_INFORMATION_AND_COMPUTING=true
SPORTS_ENGINEERINGS_AND_REHABILITATION_DEVICES=false
STOCHASTIC_PROCESSES=true
WEB_APPLICATIONS=false

exams_codes="ar_codes_=EC587525|EC587521|EC588198|EC587520|EC587534|EC587544|EC588197|EC588196|EC588195|EC587526|EC587527|EC593068|EC588191|EC587513|EC587434|EC588185|EC587185|EC587377|EC587379|EC587392|EC587382|EC587478|EC587528|EC587120|EC587421|EC587422|EC587407|EC587432|EC570419|EC587121|EC587124|EC587391|EC587460|EC587412|EC587375|EC587462|EC587376|EC587463|EC587426|EC587464|EC587427|EC587465|EC587378|EC587466|EC587429|EC587380|EC587468|EC587470|EC587413|EC587443|EC587471|EC587479|EC588187|EC588183|EC587529|EC588188|EC587530|EC587492|EC587493|EC587546|EC587540|EC587408|EC587501|EC587503|EC587442|EC587433|EC587533|EC587505|EC587457|EC587507|EC588192|EC587508|EC587512&"

exams_flags="ar_select_=${BIOMETRICS}|false|${CLINICAL_NEUROPSYCHOLOGY}|false|${DIGITAL_INNOVATION_AND_SOCIETY}|false|${ECONOMIC_POLICY_AND_LOCAL_DEVELOPMENT}|false|false|${HUMAN_ELECTROPHYSIOLOGY}|false|${LABORATORY_OF_BIG_DATA_ANALYTICS}|${PHYSICS_DATA_ANALYSIS}|false|false|${PUBLIC_VALUES_IN_MEDIA_AND_ICT}|${BIOPHOTONICS}|${COMMUNICATION_NETWORK_DESIGN}|${COMPUTER_VISION}|${DIGITAL_COMMUNICATIONS}|${DIGITAL_FORENSICS}|${E_HEALTH}|${INFORMATION_THEORY}|${INTERNET_OF_THINGS_AND_SMART_CITIES}|${NETWORK_ANALYSIS_AND_SIMULATION}|${NETWORK_CODING}|${OPTICAL_NETWORKS}|${OPTOELECTRONICS_FOR_GREEN_TECHNOLOGIES}|${QUANTUM_INFORMATION_AND_COMPUTING}|${STOCHASTIC_PROCESSES}|${WEB_APPLICATIONS}|${ANTENNAS}|false|false|${BIG_DATA_COMPUTING_ch_1}|false|${BIG_DATA_COMPUTING_ch_2}|false|${BIOPHOTONICS}|false|${CLINICAL_ENGINEERING_AND_HEALTH_TECHNOLOGY_ASSESSMENT}|false|false|false|false|false|false|false|false|false|false|false|false|false|false|false|false|false|false|${NETWORK_SYSTEMS_AND_DYNAMICS}|false|false|false|false|${PHOTOVOLTAIC_SCIENCE_AND_TECHNOLOGY}|false|false|false|${SPORTS_ENGINEERINGS_AND_REHABILITATION_DEVICES}|false|false|false|FALSE"


url_download="agendastudentiunipd.easystaff.it/ec_download_ical_grid.php?view=easycourse&form-type=corso&include=corso&txtcurr=1+anno+-+CYBERSYSTEMS%2C1+anno+-+ICT+FOR+LIFE+AND+HEALTH%2C1+anno+-+INTERNATIONAL+MOBILITY%2C1+anno+-+PHOTONICS%2C1+anno+-+TELECOMMUNICATIONS&anno=2020&scuola=ScuoladiIngegneria&corso=IN2371&anno2%5B%5D=002PD%7C1&anno2%5B%5D=004PD%7C1&anno2%5B%5D=005PD%7C1&anno2%5B%5D=003PD%7C1&anno2%5B%5D=001PD%7C1&date=${today}&periodo_didattico=&_lang=en&list=0&week_grid_type=-1&ar_codes_=&ar_select_=&col_cells=0&empty_box=0&only_grid=0&highlighted_date=0&all_events=0&faculty_group=0&_lang=en&${exams_codes}${exams_flags}
&txtaa=2020/2021&txtcorso=IN2371%20-%20ICT%20FOR%20INTERNET%20AND%20MULTIMEDIA%20-%20INGEGNERIA%20PER%20LE%20COMUNICAZIONI%20MULTIMEDIALI%20E%20INTERNET&txtanno=&docente=&attivita=&txtdocente=&txtattivita="


curl $url_download --output ~/.calendarize/calendar.ics

# remove all the commas, since they are not backslashed as stated by RFC5545 Specification for an .ics file
cat ~/.calendarize/calendar.ics|tr -d , > ~/.calendarize/calendar_without_commas.ics

calcurse -i ~/.calendarize/calendar_without_commas.ics
